<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Development</title>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="js/turnControls.js"></script>
    <script src="js/rotational.js"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent('canvas-updater', {
          dependencies: ['geometry', 'material'],

          tick: function () {
        var el = this.el;
        var material;

        material = el.getObject3D('mesh').material;
        if (!material.map) { return; }
              material.map.needsUpdate = true;
          }
      });

      AFRAME.registerComponent('draw-game', {
          schema: {
              canvas: {
                  type: 'selector'
              }
          },
          init: function() {
              var canvas = this.canvas = this.data.canvas;
              canvas.width = 3840;
              canvas.height = 1536;
              this.x = 0;
              var ctx = this.ctx = canvas.getContext('2d');
              var img = this.img = new Image();
              img.src = "assets/background.png";
          },
          tick: function(t) {
              var canvas = this.canvas;
              var ctx = this.ctx;
              ctx.drawImage( this.img, 0, 0 );
              this.x += 1;
              ctx.clearRect( this.x, 0, 24, 24 );
          }
      });
    </script>
    <a-scene>
      <a-camera>
        <a-cursor cursor-visible="true"> </a-cursor>
      </a-camera>
      <a-assets>
        <canvas id="theCanvas"> </canvas>
      </a-assets>
      <a-cylinder material="src: #theCanvas; side: double" canvas-updater draw-game="canvas: #theCanvas" position="0 0.5 0" radius="3.05" height="7.5" open-ended="true"></a-cylinder>
      <a-sphere color="#1a8961" position="0 -3.1 0" radius="3.8" theta-start="90" theta-length="90" material="side:double"></a-sphere>
      <a-sphere color="#588dbe" position="0 4.1 0" radius="3.8" theta-start="0" theta-length="90" material="side:double"></a-sphere>
      <a-entity hand-controls laser-controls raycaster="far: 4" laser-controls line="color: red; opacity: 0.75"
                oculus-go-controls="buttonTouchedColor: #10bde8" oculus-go-controls="triggerDown: "></a-entity>
    </a-scene>
  </body>
</html>